# テストを使った開発

## テストを使った開発

- テストコードから書くこともあれば, コードを書いて手で動作を確認した後に, その手動の確認をテストコードに落とすこともあります
    - 自分がわかりやすい方法, 楽な方法でテストは書いていきましょう. 無理して書くものではありません
- 例えばブラウザがないと確認が難しい検証項目をテストコードに落とすのは難しいです. そういうのは手動でやっていくなど使い分けが重要です
    - ただし, 人間はミスをするものだし, コストがかかるものです. 自動化できれば助かることは多いはずです.

## 最終問題
- 隣の人とペアを作ってぶつかり稽古(ペアプログラミング)をしましょう. 1台のPCで作業を行います
- 以下の機能がある`YAPC`モジュールを実装してください(初級編)
    + 来年のYAPC::Asiaは2014年8月28日から30日に開催予定です. 日付を教えてくれるモジュールを2人で作りましょう
    + `YAPC::year()`で年を4桁の整数で返します(テストをAの人が, コードをBの人が書きましょう)
    + `YAPC::month()`で月を2桁の整数で返します(テストをBの人が, コードをAの人が書きましょう)
    + `YAPC::day()`で日付を2桁の整数で返します(テストをAの人が, コードをBの人が書きましょう)

## 最終問題
- 以下の機能がある`YAPC`モジュールを実装してください(上級編)
    + `YAPC::is_yet(<日付の文字列>)`で, 開催前か開催後かを真か偽で返します(テストをBの人が, コードをAの人が書きましょう)
    + ｢8月28日以前｣ならば開催前(真), それ以降なら開催後(偽)として扱うことにします
        + 日付のフォーマットは, ｢4桁の年/2桁の月/2桁の日｣という形にします
        + 例えば, 2014年1月1日は, ｢2014/01/01｣です.
- この上級編はテストもコードも結構難しいです! わからない所があれば, サポーターの人に｢どうすればXXXXが出来る?｣と聞きいてみましょう

## 最終問題のヒント
- `prove -l`と`prove -Ilib`は実は同じです
- `ok YAPC::is_yet();`でちゃんと真が返ってきているかをテストできます
    - 偽を調べたい時は`ok !YAPC::is_yet();`と書きます

## ワンランク上の実装へ...
- `YAPC::is_yet`は, 引数として日付の文字列を受け取るのではなく, ｢プログラムを実行した, 現在の時間｣を利用して実装することもできます
    - 日付をうまく操作するには`Time::Piece`というモジュールを使います
    - テスト内の時間を操作するには`Test::MockTime`を使ってみてください
